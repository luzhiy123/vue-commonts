!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("hztl-ui/lib/utils/date-util"),require("hztl-ui/lib/packages/resize-box")):"function"==typeof define&&define.amd?define("tem-invoice",["hztl-ui/lib/utils/date-util","hztl-ui/lib/packages/resize-box"],t):"object"==typeof exports?exports["tem-invoice"]=t(require("hztl-ui/lib/utils/date-util"),require("hztl-ui/lib/packages/resize-box")):e["tem-invoice"]=t(e["hztl-ui/lib/utils/date-util"],e["hztl-ui/lib/packages/resize-box"])}(window,(function(e,t){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=22)}([function(e,t,a){"use strict";function i(e,t,a,i,s,n,o,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:c}}a.d(t,"a",(function(){return i}))},function(e,t){e.exports=require("vuex")},function(e,t,a){"use strict";var i=a(10),s=a(1),n={props:{showSample:Boolean,header:Object},data:()=>({curDate:new Date}),computed:{...Object(s.mapState)(["invoice"])},render(){const e=arguments[0];return e("div",{class:"ht-invoice-page-header"},[this.showSample?e("div",{class:"company-logo ht-invoice-sample-class"},["[公司徽章]"]):e("img",{attrs:{src:this.header.companyEmblem,alt:""}}),e("span",{class:"page-header-tip"},[e("span",{class:"title"},["打印时间："]),e("span",{class:`${this.showSample?"ht-invoice-sample-class":""}`},[Object(i.dateFormatFull)(this.curDate),"（",this.showSample?0:this.header.printCount,")"])]),e("div",{class:`page-header-title ${this.showSample?"ht-invoice-sample-class":""}`},[this.showSample?"[公司名称]":this.header.companyName,this.invoice.type])])}},o=a(0),r=Object(o.a)(n,void 0,void 0,!1,null,null,null);r.options.__file="packages/custom-invoice/src/components/invoice-page-header.vue";var l=r.exports;var c={render(){const e=arguments[0];return e("div",{class:"ht-invoice-page-footer"},[e("div",{class:"print-copy-right"},["思锐软件 （010）60219478/60219479"])])}},d=Object(o.a)(c,void 0,void 0,!1,null,null,null);d.options.__file="packages/custom-invoice/src/components/invoice-page-footer.vue";var p=d.exports,u=a(3),m=a.n(u),h=a(4),v=a.n(h),f={components:{Draggable:v.a},props:{list:{type:Array,required:!0}},render(){const e=arguments[0];return e("div",{class:"ht-alternative-files"},[e(v.a,m()([{class:"ht-invoice-draggable-group"},{attrs:this.$attrs},{},{on:this.listeners},{attrs:{list:this.list}}]),[this.$scopedSlots.default?this.$scopedSlots.default(this.list):this.list.map(t=>e("div",{class:"list-group-item"},[e("div",{class:"file-item file-name text-ellipsis"},[t.name,"："]),e("div",{class:"file-item ht-invoice-sample-class text-ellipsis"},["[",t.disValue,"]"])]))])])}},b=Object(o.a)(f,void 0,void 0,!1,null,null,null);b.options.__file="packages/custom-invoice/src/components/alternative-files.vue";var g=b.exports,y={props:{templateData:{type:Array,required:!0}},methods:{handleTemplateChange(e){this.$emit("change",e)}},render(){const e=arguments[0];return e("div",{class:"ht-invoice-edit-header"},[e(g,m()([{},{on:this.$listeners},{},{attrs:this.$attrs},{attrs:{group:"header",list:this.templateData},scopedSlots:{default:t=>t.length?t.map(t=>e("div",{class:`list-group-item item-flex-${t.width}`},[e("div",{class:"file-item file-name text-ellipsis"},[t.name,"："]),e("div",{class:"file-item ht-invoice-sample-class text-ellipsis"},["[",t.disValue,"]"])])):e("div",{class:"no-data"},["拖拽页头页尾部字段设置"])}}]))])}},w=Object(o.a)(y,void 0,void 0,!1,null,null,null);w.options.__file="packages/custom-invoice/src/components/invoice-edit-header.vue";var x=w.exports,S=a(5),_=a.n(S),D=a(11),j=a.n(D),O={props:{templateData:{type:Array,required:!0}},data(){return{debounceHandleTemplateChange:_()(100,this.handleTemplateChange)}},methods:{handleTemplateChange(e){this.$emit("change",e)},handleChangeWidth(e,t){t.width=e,this.debounceHandleTemplateChange(this.templateData)}},render(){const e=arguments[0];return e("div",{class:"ht-invoice-edit-body"},[e(g,m()([{attrs:{group:"body",handle:".dragghandle",list:this.templateData}},{on:this.$listeners},{},{attrs:this.$attrs},{scopedSlots:{default:t=>t.length?t.map(t=>e(j.a,{attrs:{width:t.width},on:{"change-width":e=>this.handleChangeWidth(e,t)},class:"list-group-item",style:{width:`${t.width}px`}},[e("div",{class:"dragghandle"},[e("div",{class:"file-item file-name text-ellipsis",attrs:{title:t.name}},[t.name]),e("div",{class:"file-item ht-invoice-sample-class text-ellipsis",attrs:{title:t.disValue}},["[",t.disValue,"]"])])])):e("div",{class:"no-data"},["拖拽标题列数据设置表格"])}}]))])}},B=Object(o.a)(O,void 0,void 0,!1,null,null,null);B.options.__file="packages/custom-invoice/src/components/invoice-edit-body.vue";var $=B.exports,F={props:{showSample:Boolean,header:Object,templateData:{type:Array,required:!0}},render(){const e=arguments[0];return e("div",{class:"ht-invoice-tem-header"},[e("div",{class:"ht-invoice-draggable-group"},[this.templateData.map(t=>e("div",{class:`list-group-item item-flex-${t.width}`},[e("div",{class:"file-item file-name text-ellipsis"},[t.name,"："]),e("div",{class:`file-item ${this.showSample?"ht-invoice-sample-class":""} text-ellipsis`},["[",this.showSample?t.disValue:this.header[t.file],"]"])]))])])}},H=Object(o.a)(F,void 0,void 0,!1,null,null,null);H.options.__file="packages/custom-invoice/src/components/invoice-tem-header.vue";var T=H.exports,k={props:{showSample:Boolean,data:Array,templateData:{type:Array,required:!0}},computed:{useData(){let e;if(this.showSample){e=[{}];const t=e[0];this.templateData.forEach(e=>{e.file&&(t[e.file]=e.disValue)})}else e=this.printData;return e},columns(){return this.templateData.map(e=>{let t;if(this.showSample)t=e=>`[${e}]`;else switch(e.type){case"index":t=(e,t,a)=>a+1;break;case"date":t=(e,t,a)=>a}return{...e,formatter:t}})}},render(){const e=arguments[0];return e("div",{class:"ht-invoice-tem-body"},[e("el-table",{attrs:{data:this.useData,border:!0,"row-class-name":this.showSample?"ht-invoice-sample-class":"","tooltip-effect":"dark",size:"mini"}},[this.columns.map(t=>e("el-table-column",{key:t.key||t.prop,attrs:{label:t.name,prop:t.file,width:t.width,align:t.align,"show-overflow-tooltip":!0},scopedSlots:{default:({row:e,$index:a})=>t.formatter?t.formatter(e[t.file],e,a):e[t.file]}}))])])}},q=Object(o.a)(k,void 0,void 0,!1,null,null,null);q.options.__file="packages/custom-invoice/src/components/invoice-tem-body.vue";var C=q.exports;a.d(t,"a",(function(){return g})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return p})),a.d(t,"c",(function(){return x})),a.d(t,"b",(function(){return $})),a.d(t,"g",(function(){return T})),a.d(t,"f",(function(){return C}))},function(e,t){e.exports=require("@vue/babel-helper-vue-jsx-merge-props")},function(e,t){e.exports=require("vuedraggable")},function(e,t){e.exports=require("throttle-debounce/debounce")},,,,function(e,t){e.exports=require("vue")},function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t,a){"use strict";var i=a(9),s=a.n(i),n=a(1),o=a.n(n);function r(){return{invoice:{name:"",type:"",id:""},baseHeaders:[],baseBodys:[],templateHeader:[],templateBody:[],templateFooter:[]}}const l={altHeaderFiles:e=>e.baseHeaders.filter(t=>![...e.templateHeader,...e.templateFooter].find(e=>e.name===t.name)),altBodyFiles:e=>e.baseBodys.filter(t=>!e.templateBody.find(e=>e.name===t.name)).map(e=>({width:e.width||100,...e}))},c={setBaseFiles(e,t){t&&t.baseHeaders&&t.baseBodys||console.error("baseFiles 参数缺失",t),e.baseHeaders=t.baseHeaders,e.baseBodys=t.baseBodys},setTemplateData(e,t){e.invoice={name:t.name,type:t.type,id:t.type};const a=t.content?{templateHeader:[],templateBody:[],templateFooter:[],...t.content}:{templateHeader:[],templateBody:[],templateFooter:[]};e.templateHeader=a.templateHeader.map(t=>e.baseHeaders.find(e=>e.name===t.name)||"").filter(e=>e),e.templateFooter=a.templateFooter.map(t=>e.baseHeaders.find(e=>e.name===t.name)||"").filter(e=>e),e.templateBody=a.templateBody.map(t=>{const a=e.baseBodys.find(e=>e.name===t.name);return a?{...a,width:t.width}:""}).filter(e=>e)},changeInvoiceName(e,t){e.invoice.name=t},changeTemplateHeader(e,t){e.templateHeader=t},changeTemplateBody(e,t){e.templateBody=t},changeTemplateFooter(e,t){e.templateFooter=t}},d={namespaced:!0,state:r,getters:l,mutations:c},p={state:r,getters:l,mutations:c};function u(){return new o.a.Store({...d})}function m(){return new o.a.Store({...p})}a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m})),s.a.use(o.a)},,,,,,,,,,function(e,t,a){"use strict";a.r(t);var i=a(1),s=a(12),n=a(2),o={name:"HtTemInvoice",componentName:"HtTemInvoice",props:{showSample:Boolean,invoiceData:{type:Object,required:!0},baseFiles:{type:Object,required:!0},headerData:{type:Object},bodyData:{type:Array}},computed:{...Object(i.mapState)(["invoice","templateHeader","templateBody","templateFooter"])},watch:{baseFiles(){this.initData()},invoiceData(){this.setTemplateData(this.invoiceData)}},created(){this.$store=Object(s.b)()},mounted(){this.initData()},methods:{...Object(i.mapMutations)(["setBaseFiles","setTemplateData"]),initData(){this.setBaseFiles(this.baseFiles),this.setTemplateData(this.invoiceData)}},render(){const e=arguments[0];return e("div",{class:"ht-invoice-tem-warp"},[e("div",{class:"ht-invoice-tem-content"},[e(n.e,{attrs:{showSample:this.showSample,header:this.headerData}}),e(n.g,{attrs:{showSample:this.showSample,header:this.headerData,templateData:this.templateHeader}}),e(n.f,{attrs:{showSample:this.showSample,data:this.bodyData,templateData:this.templateBody}}),e(n.g,{attrs:{showSample:this.showSample,header:this.headerData,templateData:this.templateFooter}}),e(n.d)])])}},r=a(0),l=Object(r.a)(o,void 0,void 0,!1,null,null,null);l.options.__file="packages/custom-invoice/src/tem-invoice.vue";var c=l.exports;c.install=function(e){e.component(c.name,c)};t.default=c}]).default}));
//# sourceMappingURL=index.js.map